
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user's profile, including their role and loyalty information.",
      "properties": {
        "id": { "type": "string", "description": "User's unique ID (matches Auth UID)." },
        "email": { "type": "string", "format": "email", "description": "User's email address." },
        "name": { "type": "string", "description": "User's full name." },
        "mobileNumber": { "type": "string", "description": "User's mobile phone number." },
        "cafeNickname": { "type": "string", "description": "User's preferred nickname for order callouts." },
        "loyaltyPoints": { "type": "number", "description": "Accumulated loyalty points." },
        "lifetimePoints": { "type": "number", "description": "Total points accumulated over the user's lifetime, not reduced by redemptions." },
        "loyaltyLevelId": { "type": "string", "description": "ID of the user's current loyalty level." },
        "role": { "type": "string", "enum": ["customer", "staff", "admin"], "description": "The user's role in the system." },
        "dateOfBirth": { "type": "string", "format": "date", "description": "User's date of birth." },
        "birthdayDiscountValue": { "type": ["number", "null"], "description": "The value of the birthday discount (fixed amount or percentage)." },
        "birthdayDiscountType": { "type": ["string", "null"], "enum": ["fixed", "percentage"], "description": "The type of birthday discount." },
        "birthdayFreebieMenuItemIds": { "type": "array", "items": { "type": "string" }, "description": "List of menu item IDs awarded as a birthday freebie." },
        "orderCount": { "type": "number", "description": "The number of orders the user has placed, used for tiered welcome offers." },
        "emailVerified": { "type": "boolean", "description": "Mirrors the email verification status from Firebase Auth." },
        "referralCode": { "type": "string", "description": "Unique code for referring friends." },
        "hasLinkedSocials": { "type": "boolean", "description": "Whether the user has claimed points for linking social media." },
        "hasLeftReview": { "type": "boolean", "description": "Whether the user has claimed points for leaving a review." },
        "dailyOffersRedeemed": {
          "type": "object",
          "description": "A map of daily offer IDs to the date (YYYY-MM-DD) they were redeemed.",
          "additionalProperties": { "type": "string" }
        }
      },
      "required": ["id", "email", "name", "role"]
    },
    "Order": {
      "title": "Order",
      "type": "object",
      "description": "Represents a customer's order for pickup.",
      "properties": {
        "id": { "type": "string", "description": "Unique ID for the order." },
        "customerId": { "type": "string", "description": "The UID of the user who placed the order." },
        "orderDate": { "type": "string", "format": "date-time", "description": "Timestamp of when the order was placed." },
        "totalAmount": { "type": "number", "description": "Total cost of the order." },
        "status": { "type": "string", "enum": ["Placed", "Processing", "Ready for Pickup", "Completed", "Rejected"], "description": "Current status of the order." },
        "paymentStatus": { "type": "string", "enum": ["Paid", "Unpaid"], "description": "The payment status of the order." },
        "paymentMethod": { "type": "string", "enum": ["Online", "Cash", "QR", "Wallet"], "description": "The method used for payment." },
        "transactionId": { "type": "string", "description": "The transaction ID from the payment gateway." },
        "orderItems": {
          "type": "array",
          "items": { "$ref": "#/entities/OrderItem" },
          "description": "List of items included in the order."
        },
        "orderType": {
            "type": "string",
            "enum": ["Dine-in", "Takeaway"],
            "description": "The type of order."
        },
        "tableNumber": {
            "type": "string",
            "description": "The table number for dine-in orders."
        },
        "pointsRedeemed": {
          "type": "number",
          "description": "The number of loyalty points redeemed for this order."
        },
        "discountApplied": {
          "type": "number",
          "description": "The monetary discount applied to this order from redeemed points."
        },
        "serviceCharge": {
            "type": "number",
            "description": "The service charge applied to the order (e.g., for dine-in)."
        },
        "pointsToEarn": {
          "type": "number",
          "description": "The number of loyalty points to be awarded when the order is completed."
        },
        "welcomeOfferApplied": {
          "type": "boolean",
          "description": "Whether a welcome offer discount was applied to this order."
        }
      },
      "required": ["id", "customerId", "orderDate", "totalAmount", "status", "orderItems", "orderType"]
    },
    "DailyGameWinners": {
      "title": "Daily Game Winners",
      "type": "object",
      "description": "Stores daily winners for game zone games.",
      "properties": {
        "spinWinner": { "type": ["string", "null"] },
        "luckyWinner": { "type": ["string", "null"] },
        "triviaWinner": { "type": ["string", "null"] }
      }
    }
  }
}
