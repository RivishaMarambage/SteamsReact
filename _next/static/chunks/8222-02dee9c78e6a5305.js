(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8222],{14636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>l,Wv:()=>o,hl:()=>d});var s=a(95155),r=a(12115),i=a(98176),n=a(59434);let l=i.bL,o=i.l9,d=r.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:l=4,...o}=e;return(0,s.jsx)(i.ZL,{children:(0,s.jsx)(i.UC,{ref:t,align:r,sideOffset:l,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});d.displayName=i.UC.displayName},17313:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>l});var s=a(95155),r=a(12115),i=a(60704),n=a(59434);let l=i.bL,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});o.displayName=i.B8.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});d.displayName=i.l9.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});c.displayName=i.UC.displayName},17759:(e,t,a)=>{"use strict";a.d(t,{C5:()=>y,MJ:()=>h,Rr:()=>g,eI:()=>p,lR:()=>x,lV:()=>d,zB:()=>m});var s=a(95155),r=a(12115),i=a(66634),n=a(62177),l=a(59434),o=a(85057);let d=n.Op,c=r.createContext({}),m=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(n.xI,{...t})})},u=()=>{let e=r.useContext(c),t=r.useContext(f),{getFieldState:a,formState:s}=(0,n.xW)(),i=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...i}},f=r.createContext({}),p=r.forwardRef((e,t)=>{let{className:a,...i}=e,n=r.useId();return(0,s.jsx)(f.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",a),...i})})});p.displayName="FormItem";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e,{error:i,formItemId:n}=u();return(0,s.jsx)(o.J,{ref:t,className:(0,l.cn)(i&&"text-destructive",a),htmlFor:n,...r})});x.displayName="FormLabel";let h=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:n,formDescriptionId:l,formMessageId:o}=u();return(0,s.jsx)(i.DX,{ref:t,id:n,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...a})});h.displayName="FormControl";let g=r.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:i}=u();return(0,s.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});g.displayName="FormDescription";let y=r.forwardRef((e,t)=>{var a;let{className:r,children:i,...n}=e,{error:o,formMessageId:d}=u(),c=o?String(null!=(a=null==o?void 0:o.message)?a:""):i;return c?(0,s.jsx)("p",{ref:t,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",r),...n,children:c}):null});y.displayName="FormMessage"},18222:(e,t,a)=>{Promise.resolve().then(a.bind(a,72949))},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>o});var s=a(95155),r=a(12115),i=a(66634),n=a(74466),l=a(59434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:d=!1,...c}=e,m=d?i.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(o({variant:r,size:n,className:a})),ref:t,...c})});d.displayName="Button"},47262:(e,t,a)=>{"use strict";a.d(t,{S:()=>o});var s=a(95155),r=a(12115),i=a(76981),n=a(10518),l=a(59434);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.bL,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(i.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})})});o.displayName=i.bL.displayName},54165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>f,Es:()=>x,HM:()=>m,L3:()=>h,c7:()=>p,lG:()=>o,rr:()=>g,zM:()=>d});var s=a(95155),r=a(12115),i=a(45821),n=a(25318),l=a(59434);let o=i.bL,d=i.l9,c=i.ZL,m=i.bm,u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=i.hJ.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,hideCloseButton:o,...d}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(i.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,!o&&(0,s.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=i.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=i.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=i.VY.displayName},59409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>m});var s=a(95155),r=a(12115),i=a(43433),n=a(79556),l=a(77381),o=a(10518),d=a(59434);let c=i.bL;i.YJ;let m=i.WT,u=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(i.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(i.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.l9.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});f.displayName=i.PP.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=i.wn.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...l}=e;return(0,s.jsx)(i.ZL,{children:(0,s.jsxs)(i.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,s.jsx)(f,{}),(0,s.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(p,{})]})})});x.displayName=i.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=i.JU.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(i.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(i.p4,{children:r})]})});h.displayName=i.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=i.wv.displayName},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(95155),r=a(12115),i=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},72949:(e,t,a)=>{"use strict";a.d(t,{AuthForm:()=>Y});var s=a(95155),r=a(6874),i=a.n(r),n=a(66766),l=a(35695),o=a(90221),d=a(62177),c=a(55594),m=a(30285),u=a(17759),f=a(62523),p=a(87481),x=a(86578),h=a(91467),g=a(91721),y=a(31554),b=a(15222),v=a(51920),j=a(19637),N=a(31573),w=a(4607),C=a(17607),S=a(90767),k=a(84752),P=a(93004),z=a(35317),A=a(12115),I=a(14636),R=a(59434),F=a(83013),M=a(85511),O=a(54165),T=a(85057),B=a(29911),_=a(59409),E=a(17313),D=a(47262);let J=c.z.object({email:c.z.string().email({message:"Please enter a valid email address."}),password:c.z.string().min(6,{message:"Password must be at least 6 characters."}),confirmPassword:c.z.string().optional(),fullName:c.z.string().optional(),mobileNumber:c.z.string().optional(),countryCode:c.z.string().optional(),cafeNickname:c.z.string().optional(),dateOfBirth:c.z.date().optional(),agreeToTerms:c.z.boolean().optional()}),L=J.pick({email:!0,password:!0}),U=J.pick({email:!0,password:!0,confirmPassword:!0,fullName:!0}).extend({fullName:c.z.string().min(1,{message:"Full name is required."}),confirmPassword:c.z.string().min(6,{message:"Please confirm your password."})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),V=J.pick({email:!0,password:!0,fullName:!0,mobileNumber:!0,countryCode:!0,cafeNickname:!0,dateOfBirth:!0,agreeToTerms:!0}).extend({fullName:c.z.string().min(1,{message:"Full name is required."}),mobileNumber:c.z.string().min(9,{message:"Please enter a valid mobile number."}),countryCode:c.z.string(),cafeNickname:c.z.string().optional(),dateOfBirth:c.z.date({required_error:"Date of birth is required."}),agreeToTerms:c.z.literal(!0,{errorMap:()=>({message:"You must agree to the Privacy Policy."})})}),H={customer:{email:"customer@example.com",password:"password123",name:"Demo Customer"},staff:{email:"staff@example.com",password:"password123",name:"Demo Staff"},admin:{email:"admin@example.com",password:"password123",name:"Demo Admin"}};function Y(e){let{authType:t,role:a}=e,r=(0,l.useRouter)(),{toast:c}=(0,p.dj)(),J=(0,S.As)(),Y=(0,S.jt)(),[q,G]=(0,A.useState)(""),[W,$]=(0,A.useState)(!1),[X,Z]=(0,A.useState)(!1),K="login"===t?L:"customer"===a?V:U,Q=(0,d.mN)({resolver:(0,o.u)(K),defaultValues:{email:"",password:"",confirmPassword:"",fullName:"",mobileNumber:"",countryCode:"+94",cafeNickname:"",dateOfBirth:void 0,agreeToTerms:!1}}),ee=H[a];(0,A.useEffect)(()=>{(async()=>{if(J&&Y&&"login"===t)try{let e=await (0,P.Wm)(J,ee.email);if(0===e.length)try{let e=(await (0,P.eJ)(J,ee.email,ee.password)).user,t={id:e.uid,email:ee.email,name:ee.name,role:a,loyaltyPoints:125*("customer"===a),lifetimePoints:125*("customer"===a),loyaltyLevelId:"bronze",orderCount:+("customer"===a),emailVerified:!0};await (0,z.BN)((0,z.H9)(Y,"users",e.uid),t),console.log("Created demo user: ".concat(ee.email)),J.currentUser&&await J.signOut()}catch(e){"auth/email-already-in-use"!==e.code&&console.error("Failed to create demo user ".concat(ee.email,":"),e)}}catch(e){console.error("Failed to check for demo user ".concat(ee.email,":"),e)}})()},[J,Y,t,ee,a]);let et=async()=>{if(Y)try{let e=(0,z.wP)(Y);console.log("Seeding initial data...");let t="",a=(0,z.rJ)(Y,"categories");[{name:"Coffee Classics",type:"Beverages"},{name:"Specialty Lattes",type:"Beverages"},{name:"Matcha & Tea",type:"Beverages"},{name:"Pastries & Bakes",type:"Food"},{name:"Savory Snacks",type:"Food"},{name:"Lunch Specials",type:"Food"},{name:"Custom Creations",type:"Beverages"}].forEach(s=>{let r=(0,z.H9)(a);"Custom Creations"===s.name&&(t=r.id),e.set(r,s)});let s=(0,z.rJ)(Y,"loyalty_levels");[{name:"Member",minimumPoints:0},{name:"Bronze",minimumPoints:100},{name:"Silver",minimumPoints:500},{name:"Gold",minimumPoints:2e3},{name:"Platinum",minimumPoints:5e3}].forEach(t=>{let a=(0,z.H9)(s,t.name.toLowerCase());e.set(a,t)});let r=(0,z.rJ)(Y,"addon_categories"),i={};[{name:"Milk Options",description:"Choose your preferred milk"},{name:"Syrups",description:"Add a touch of sweetness"},{name:"Toppings",description:"Finish your drink with a flourish"}].forEach(t=>{let a=(0,z.H9)(r);e.set(a,t),i[t.name]=a.id}),await e.commit();let n=(0,z.wP)(Y),l=(0,z.rJ)(Y,"addons");if([{name:"Extra Espresso Shot",price:100,categoryName:"Toppings"},{name:"Almond Milk",price:80,categoryName:"Milk Options"},{name:"Oat Milk",price:80,categoryName:"Milk Options"},{name:"Soy Milk",price:70,categoryName:"Milk Options"},{name:"Whipped Cream",price:50,categoryName:"Toppings"},{name:"Caramel Drizzle",price:60,categoryName:"Syrups"},{name:"Chocolate Syrup",price:60,categoryName:"Syrups"}].forEach(e=>{let t=i[e.categoryName];if(t){let a=(0,z.H9)(l),{categoryName:s,...r}=e;n.set(a,{...r,addonCategoryId:t})}}),t){let e=(0,z.rJ)(Y,"menu_items"),a={name:"Custom Coffee Base",description:"Your own coffee creation.",price:250,categoryId:t,isOutOfStock:!1,addonGroups:[{addonCategoryId:i["Milk Options"],isRequired:!0,minSelection:1,maxSelection:1},{addonCategoryId:i.Syrups,isRequired:!1,minSelection:0,maxSelection:2},{addonCategoryId:i.Toppings,isRequired:!1,minSelection:0,maxSelection:3}]},s={name:"Custom Tea Base",description:"Your own tea creation.",price:200,categoryId:t,isOutOfStock:!1,addonGroups:[{addonCategoryId:i["Milk Options"],isRequired:!1,minSelection:0,maxSelection:1},{addonCategoryId:i.Syrups,isRequired:!1,minSelection:0,maxSelection:2}]};n.set((0,z.H9)(e,"custom-coffee-base"),a),n.set((0,z.H9)(e,"custom-tea-base"),s)}await n.commit(),console.log("Database seeded successfully.")}catch(e){e instanceof S.$9?S.de.emit("permission-error",e):(console.error("Error seeding database: ",e),c({variant:"destructive",title:"Database Seeding Failed",description:"Could not set up initial data. Please check Firestore rules."}))}},ea=async e=>{if(!J||!Y)return void c({variant:"destructive",title:"Firebase not initialized."});if("signup"===t)try{if((await (0,P.Wm)(J,e.email)).length>0)return void Q.setError("email",{type:"manual",message:"This email address is already in use."});let t=e.countryCode&&e.mobileNumber?"".concat(e.countryCode).concat(e.mobileNumber.replace(/^0+/,"")):void 0;if("admin"===a){let e=(0,z.rJ)(Y,"users"),t=(0,z.P)(e,(0,z._M)("role","==","admin"),(0,z.AB)(1));(await (0,z.GG)(t)).empty&&await et()}let s=(await (0,P.eJ)(J,e.email,e.password)).user;await (0,P.gA)(s);let i=(0,z.H9)(Y,"users",s.uid),n={id:s.uid,email:e.email,name:e.fullName,role:a,mobileNumber:t,cafeNickname:e.cafeNickname||"",dateOfBirth:e.dateOfBirth?e.dateOfBirth.toISOString():"",loyaltyPoints:50,lifetimePoints:50,loyaltyLevelId:"member",orderCount:0,emailVerified:s.emailVerified};await (0,z.BN)(i,n).catch(e=>{throw new S.$9({path:"users/".concat(s.uid),operation:"create",requestResourceData:n})}),c({title:"Account Created!",description:"Welcome! We've sent you a verification email. Please check your inbox, then log in."}),r.push("/login/".concat(a))}catch(e){e instanceof S.$9?S.de.emit("permission-error",e):c({variant:"destructive",title:"Sign Up Failed",description:e.message||"An unexpected error occurred."})}else{let t=P.F0;(0,P.oM)(J,t).then(()=>(0,P.x9)(J,e.email,e.password)).then(e=>{let t=(0,z.H9)(Y,"users",e.user.uid);(0,z.x7)(t).then(e=>{if(e.exists())if(e.data().role===a){let e=(0,k.v)(a);r.push(e)}else J.signOut(),c({variant:"destructive",title:"Access Denied",description:"You are not authorized to log in as a ".concat(a,". Please use the correct login page.")});else J.signOut(),c({variant:"destructive",title:"Login Failed",description:"User profile not found. Please contact support."})}).catch(e=>{let a=new S.$9({path:t.path,operation:"get"});S.de.emit("permission-error",a)})}).catch(e=>{c({variant:"destructive",title:"Login Failed",description:"Invalid email or password. Please try again."})})}},es=async()=>{if(J){if(!q)return void c({variant:"destructive",title:"Email required",description:"Please enter your email to reset your password."});try{await (0,P.J1)(J,q),c({title:"Password Reset Email Sent",description:"Please check your inbox."})}catch(e){c({variant:"destructive",title:"Error",description:e.message})}}},er=async()=>{if(!J||!Y)return;let e=new P.HF;try{let t=await (0,P.df)(J,e),s=t.user,i=(0,P.B8)(t),n=(0,z.H9)(Y,"users",s.uid),l=await (0,z.x7)(n);if((null==i?void 0:i.isNewUser)||!l.exists()){let e={id:s.uid,email:s.email,name:s.displayName,role:a,loyaltyPoints:50,lifetimePoints:50,loyaltyLevelId:"member",orderCount:0,emailVerified:s.emailVerified};await (0,z.BN)(n,e),c({title:"Account Created!",description:"Welcome, ".concat(s.displayName,"!")})}else{if(l.data().role!==a){await J.signOut(),c({variant:"destructive",title:"Access Denied",description:"You are not authorized to log in as a ".concat(a,".")});return}c({title:"Welcome back, ".concat(s.displayName,"!")})}let o=(0,k.v)(a);r.push(o)}catch(e){if("auth/account-exists-with-different-credential"===e.code&&e.customData.email){let t=e.customData.email,s=await (0,P.Wm)(J,t);if("password"===s[0]){let s=prompt("It looks like you already have an account with this email. Please enter your password to link your Google account.");if(s)try{let i=await (0,P.x9)(J,t,s),n=P.HF.credentialFromError(e);if(i&&n){await (0,P.OS)(i.user,n),c({title:"Accounts Linked!",description:"You can now sign in with Google."});let e=(0,k.v)(a);r.push(e)}}catch(e){c({variant:"destructive",title:"Linking Failed",description:e.message})}}else c({variant:"destructive",title:"Sign-in Failed",description:"You have previously signed in with ".concat(s[0],".")})}else c({variant:"destructive",title:"Google Sign-In Failed",description:e.message})}},ei="login"===t?"Welcome Back":"Create an Account",en="login"===t?"Please enter your details to sign in.":"Join us for exclusive rewards.";return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-background p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 shadow-2xl rounded-2xl overflow-hidden bg-card",children:[(0,s.jsxs)("div",{className:"relative p-8 text-white hidden md:flex flex-col justify-between",children:[(0,s.jsxs)("div",{className:"absolute inset-0",children:[(0,s.jsx)(n.default,{src:"https://picsum.photos/seed/auth-hero/1080/1920",alt:"Steamsbury Cafe",fill:!0,className:"object-cover","data-ai-hint":"cafe exterior night"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60"})]}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("h2",{className:"text-4xl font-bold font-headline",children:"STEAMSBURY"}),(0,s.jsx)("p",{className:"text-sm",children:"by SANTHIYAGU"})]}),(0,s.jsxs)("div",{className:"relative z-10 space-y-4",children:[(0,s.jsx)(x.A,{className:"w-12 h-12 text-accent"}),(0,s.jsx)("h3",{className:"text-3xl font-bold font-headline",children:"Morning brew, on us."}),(0,s.jsx)("p",{className:"text-muted-foreground text-white/80",children:"Join our rewards program today. Earn points for every purchase and get a free drink after just 5 visits."}),(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 p-2 pr-4 rounded-full bg-black/50 border border-white/20",children:[(0,s.jsx)("div",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-accent text-accent-foreground",children:(0,s.jsx)(h.A,{className:"h-5 w-5"})}),(0,s.jsx)("span",{className:"font-semibold",children:"50 Bonus Points on Sign Up"})]})]})]}),(0,s.jsx)("div",{className:"p-8",children:(0,s.jsxs)("div",{className:"flex flex-col h-full justify-center",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold font-headline",children:ei}),(0,s.jsx)("p",{className:"text-muted-foreground",children:en})]}),(0,s.jsxs)(E.tU,{defaultValue:t,className:"w-full",onValueChange:e=>r.push("/".concat(e,"/").concat(a)),children:[(0,s.jsxs)(E.j7,{className:"grid w-full grid-cols-2 mb-6",children:[(0,s.jsx)(E.Xi,{value:"login",children:"Login"}),(0,s.jsx)(E.Xi,{value:"signup",children:"Sign Up"})]}),(0,s.jsx)(u.lV,{...Q,children:(0,s.jsxs)("form",{onSubmit:Q.handleSubmit(ea),className:"grid gap-4",children:["signup"===t&&"customer"===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.zB,{control:Q.control,name:"fullName",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Full Name"}),(0,s.jsx)(u.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(f.p,{placeholder:"John Doe",className:"pl-10",...t})]})}),(0,s.jsx)(u.C5,{})]})}}),(0,s.jsx)(u.zB,{control:Q.control,name:"mobileNumber",render:()=>{var e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Mobile Number"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(u.zB,{control:Q.control,name:"countryCode",render:e=>{let{field:t}=e;return(0,s.jsx)(u.eI,{className:"w-1/3",children:(0,s.jsx)(u.MJ,{children:(0,s.jsxs)(_.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(_.bq,{children:(0,s.jsx)(_.yv,{placeholder:"+94"})}),(0,s.jsx)(_.gC,{children:(0,s.jsx)(_.eb,{value:"+94",children:"+94 (LK)"})})]})})})}}),(0,s.jsx)(u.zB,{control:Q.control,name:"mobileNumber",render:e=>{let{field:t}=e;return(0,s.jsx)(u.eI,{className:"flex-1",children:(0,s.jsx)(u.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(y.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(f.p,{placeholder:"77 123 4567",className:"pl-10",...t})]})})})}})]}),(0,s.jsx)(u.C5,{children:null==(e=Q.formState.errors.mobileNumber)?void 0:e.message})]})}}),(0,s.jsx)(u.zB,{control:Q.control,name:"cafeNickname",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(u.lR,{children:"Nickname"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Optional"})]}),(0,s.jsx)(u.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(b.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(f.p,{placeholder:"Enter your nickname",className:"pl-10",...t})]})}),(0,s.jsx)(u.C5,{})]})}}),(0,s.jsx)(u.zB,{control:Q.control,name:"dateOfBirth",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Date of Birth"}),(0,s.jsxs)(I.AM,{children:[(0,s.jsx)(I.Wv,{asChild:!0,children:(0,s.jsx)(u.MJ,{children:(0,s.jsxs)(m.$,{variant:"outline",className:(0,R.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,F.GP)(t.value,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(v.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(I.hl,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(M.V,{mode:"single",captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-100,toYear:new Date().getFullYear(),selected:t.value,onSelect:t.onChange,disabled:e=>e>new Date||e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,s.jsx)(u.C5,{})]})}})]}),"signup"===t&&"customer"!==a&&(0,s.jsx)(u.zB,{control:Q.control,name:"fullName",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Full Name"}),(0,s.jsx)(u.MJ,{children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(f.p,{placeholder:"Alex Doe",...t})})}),(0,s.jsx)(u.C5,{})]})}}),(0,s.jsx)(u.zB,{control:Q.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Email Address"}),(0,s.jsx)(u.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(j.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(f.p,{type:"email",placeholder:"name@example.com",className:"pl-10",...t})]})}),(0,s.jsx)(u.C5,{})]})}}),(0,s.jsx)(u.zB,{control:Q.control,name:"password",render:e=>{let{field:a}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(u.lR,{children:"Password"}),"login"===t&&(0,s.jsxs)(O.lG,{children:[(0,s.jsx)(O.zM,{asChild:!0,children:(0,s.jsx)(m.$,{variant:"link",className:"p-0 h-auto text-sm text-accent",children:"Forgot Password?"})}),(0,s.jsxs)(O.Cf,{children:[(0,s.jsxs)(O.c7,{children:[(0,s.jsx)(O.L3,{children:"Reset Password"}),(0,s.jsx)(O.rr,{children:"Enter your email and we will send you a link to reset your password."})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(T.J,{htmlFor:"reset-email",children:"Email"}),(0,s.jsx)(f.p,{id:"reset-email",type:"email",placeholder:"m@example.com",value:q,onChange:e=>G(e.target.value)})]}),(0,s.jsxs)(O.Es,{children:[(0,s.jsx)(O.HM,{asChild:!0,children:(0,s.jsx)(m.$,{type:"button",variant:"outline",children:"Cancel"})}),(0,s.jsx)(O.HM,{asChild:!0,children:(0,s.jsx)(m.$,{onClick:es,children:"Send Reset Link"})})]})]})]})]}),(0,s.jsx)(u.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(N.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(f.p,{type:W?"text":"password",className:"pl-10",placeholder:"Create a password",...a}),(0,s.jsx)(m.$,{type:"button",variant:"ghost",size:"icon",className:"absolute inset-y-0 right-0 h-full w-10 text-muted-foreground",onClick:()=>$(e=>!e),tabIndex:-1,children:W?(0,s.jsx)(w.A,{className:"h-4 w-4"}):(0,s.jsx)(C.A,{className:"h-4 w-4"})})]})}),(0,s.jsx)(u.C5,{})]})}}),"signup"===t&&"customer"!==a&&(0,s.jsx)(u.zB,{control:Q.control,name:"confirmPassword",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{children:[(0,s.jsx)(u.lR,{children:"Confirm Password"}),(0,s.jsx)(u.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(N.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(f.p,{type:X?"text":"password",className:"pl-10",...t}),(0,s.jsx)(m.$,{type:"button",variant:"ghost",size:"icon",className:"absolute inset-y-0 right-0 h-full w-10 text-muted-foreground",onClick:()=>Z(e=>!e),tabIndex:-1,children:X?(0,s.jsx)(w.A,{className:"h-4 w-4"}):(0,s.jsx)(C.A,{className:"h-4 w-4"})})]})}),(0,s.jsx)(u.C5,{})]})}}),"signup"===t&&"customer"===a&&(0,s.jsx)(u.zB,{control:Q.control,name:"agreeToTerms",render:e=>{let{field:t}=e;return(0,s.jsxs)(u.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,s.jsx)(u.MJ,{children:(0,s.jsx)(D.S,{checked:t.value,onCheckedChange:t.onChange})}),(0,s.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,s.jsxs)(u.lR,{children:["I agree to the ",(0,s.jsx)(i(),{href:"#",className:"underline",children:"Privacy Policy"})]}),(0,s.jsx)(u.C5,{})]})]})}}),(0,s.jsx)(m.$,{type:"submit",className:"w-full bg-accent hover:bg-accent/90 text-accent-foreground",size:"lg",children:"login"===t?"Sign In":"Create Account"})]})})]}),(0,s.jsxs)("div",{className:"relative my-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("span",{className:"w-full border-t"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,s.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,s.jsxs)(m.$,{variant:"outline",className:"w-full",onClick:er,children:[(0,s.jsx)(B.DSS,{className:"mr-2 h-4 w-4"}),"Google"]})})]})})]})})}},84752:(e,t,a)=>{"use strict";a.d(t,{L:()=>r,v:()=>s});let s=e=>{switch(e){case"admin":return"/dashboard/admin/analytics";case"staff":return"/dashboard/staff/orders";case"customer":return"/dashboard";default:return"/"}},r=["/","/login/customer","/login/staff","/login/admin","/signup/customer","/signup/admin","/privacy","/about","/rewards","/offers","/menu","/updates"]},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var s=a(95155),r=a(12115),i=a(40968),n=a(74466),l=a(59434);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,l.cn)(o(),a),...r})});d.displayName=i.b.displayName},85511:(e,t,a)=>{"use strict";a.d(t,{V:()=>d});var s=a(95155);a(12115);var r=a(965),i=a(73158),n=a(62181),l=a(59434),o=a(30285);function d(e){let{className:t,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,s.jsx)(n.hv,{showOutsideDays:d,className:(0,l.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(r.A,{className:(0,l.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(i.A,{className:(0,l.cn)("h-4 w-4",t),...a})}},...c})}d.displayName="Calendar"},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(12115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}}]);