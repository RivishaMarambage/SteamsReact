(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4274],{3561:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(40157).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},26126:(e,r,t)=>{"use strict";t.d(r,{E:()=>i});var s=t(95155);t(12115);var a=t(74466),l=t(59434);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)(n({variant:t}),r),...a})}},39048:(e,r,t)=>{"use strict";t.d(r,{default:()=>g});var s=t(95155),a=t(12115),l=t(30285),n=t(66695),i=t(54165),d=t(44838),o=t(85057),c=t(59409),u=t(85127),m=t(90010),f=t(68856),x=t(26126),h=t(3561),p=t(87481),j=t(90767),y=t(35317);function g(){let{data:e,isLoading:r}=(0,j.Ge)("users"),{data:t,isLoading:g}=(0,j.Ge)("loyalty_levels"),N=(0,j.jt)(),[v,b]=(0,a.useState)(!1),[w,A]=(0,a.useState)(!1),[R,C]=(0,a.useState)(null),[E,D]=(0,a.useState)("customer"),{toast:L}=(0,p.dj)(),k=e=>{C(e),D(e.role),b(!0)},O=e=>{C(e),A(!0)},S=async()=>{if(!R||!N)return;let e=(0,y.H9)(N,"users",R.id);await (0,y.BN)(e,{role:E},{merge:!0}),L({title:"Role Updated",description:"".concat(R.name,"'s role has been updated to ").concat(E,".")}),b(!1),C(null)},P=async()=>{R&&N&&(await (0,y.kd)((0,y.H9)(N,"users",R.id)),L({title:"User Deleted",description:"".concat(R.name," has been removed from the system.")}),A(!1),C(null))};if(r||g)return(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(f.E,{className:"h-8 w-48"})}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(f.E,{className:"h-12 w-full"}),(0,s.jsx)(f.E,{className:"h-16 w-full"}),(0,s.jsx)(f.E,{className:"h-16 w-full"}),(0,s.jsx)(f.E,{className:"h-16 w-full"})]})})]});let Z=e=>{switch(e){case"admin":return"destructive";case"staff":return"secondary";default:return"outline"}},F=e=>{if(!e||!t)return"N/A";let r=t.find(r=>r.id===e);return r?r.name:"N/A"};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{className:"font-headline text-2xl",children:"All Users"})}),(0,s.jsx)(n.Wu,{children:(0,s.jsxs)(u.XI,{children:[(0,s.jsx)(u.A0,{children:(0,s.jsxs)(u.Hj,{children:[(0,s.jsx)(u.nd,{children:"Name"}),(0,s.jsx)(u.nd,{children:"Email"}),(0,s.jsx)(u.nd,{children:"Mobile Number"}),(0,s.jsx)(u.nd,{children:"Role"}),(0,s.jsx)(u.nd,{children:"Loyalty Level"}),(0,s.jsx)(u.nd,{children:"Order Count"}),(0,s.jsx)(u.nd,{children:"Linked Socials"}),(0,s.jsx)(u.nd,{children:"Left Review"}),(0,s.jsx)(u.nd,{children:"Redeemable Points"}),(0,s.jsx)(u.nd,{children:"Lifetime Points"}),(0,s.jsx)(u.nd,{children:(0,s.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,s.jsx)(u.BF,{children:null==e?void 0:e.map(e=>{var r,t,a;return(0,s.jsxs)(u.Hj,{children:[(0,s.jsx)(u.nA,{className:"font-medium",children:e.name}),(0,s.jsx)(u.nA,{children:e.email}),(0,s.jsx)(u.nA,{children:e.mobileNumber||"N/A"}),(0,s.jsx)(u.nA,{children:(0,s.jsx)(x.E,{variant:Z(e.role),children:e.role})}),(0,s.jsx)(u.nA,{className:"capitalize",children:"customer"===e.role?F(e.loyaltyLevelId):"N/A"}),(0,s.jsx)(u.nA,{className:"text-right",children:"customer"===e.role?null!=(r=e.orderCount)?r:0:"N/A"}),(0,s.jsx)(u.nA,{children:"customer"===e.role?(0,s.jsx)(x.E,{variant:e.hasLinkedSocials?"secondary":"outline",children:e.hasLinkedSocials?"Yes":"No"}):"N/A"}),(0,s.jsx)(u.nA,{children:"customer"===e.role?(0,s.jsx)(x.E,{variant:e.hasLeftReview?"secondary":"outline",children:e.hasLeftReview?"Yes":"No"}):"N/A"}),(0,s.jsx)(u.nA,{className:"text-right",children:null!=(t=e.loyaltyPoints)?t:0}),(0,s.jsx)(u.nA,{className:"text-right",children:null!=(a=e.lifetimePoints)?a:0}),(0,s.jsx)(u.nA,{children:(0,s.jsxs)(d.rI,{children:[(0,s.jsx)(d.ty,{asChild:!0,children:(0,s.jsxs)(l.$,{"aria-haspopup":"true",size:"icon",variant:"ghost",children:[(0,s.jsx)(h.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,s.jsxs)(d.SQ,{align:"end",children:[(0,s.jsx)(d.lp,{children:"Actions"}),(0,s.jsx)(d._2,{onClick:()=>k(e),children:"Edit Role"}),(0,s.jsx)(d._2,{className:"text-destructive",onClick:()=>O(e),children:"Delete"})]})]})})]},e.id)})})]})})]}),(0,s.jsx)(i.lG,{open:v,onOpenChange:b,children:(0,s.jsxs)(i.Cf,{children:[(0,s.jsxs)(i.c7,{children:[(0,s.jsxs)(i.L3,{children:["Edit Role for ",null==R?void 0:R.name]}),(0,s.jsx)(i.rr,{children:"Select a new role for this user."})]}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(o.J,{htmlFor:"role",children:"Role"}),(0,s.jsxs)(c.l6,{value:E,onValueChange:e=>D(e),children:[(0,s.jsx)(c.bq,{children:(0,s.jsx)(c.yv,{placeholder:"Select a role"})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"customer",children:"Customer"}),(0,s.jsx)(c.eb,{value:"staff",children:"Staff"}),(0,s.jsx)(c.eb,{value:"admin",children:"Admin"})]})]})]})}),(0,s.jsxs)(i.Es,{children:[(0,s.jsx)(l.$,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,s.jsx)(l.$,{onClick:S,children:"Save Changes"})]})]})}),(0,s.jsx)(m.Lt,{open:w,onOpenChange:A,children:(0,s.jsxs)(m.EO,{children:[(0,s.jsxs)(m.wd,{children:[(0,s.jsx)(m.r7,{children:"Are you absolutely sure?"}),(0,s.jsx)(m.$v,{children:"This action cannot be undone. This will permanently delete the user's data from the database."})]}),(0,s.jsxs)(m.ck,{children:[(0,s.jsx)(m.Zr,{children:"Cancel"}),(0,s.jsx)(m.Rx,{onClick:P,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}},59409:(e,r,t)=>{"use strict";t.d(r,{bq:()=>m,eb:()=>p,gC:()=>h,l6:()=>c,yv:()=>u});var s=t(95155),a=t(12115),l=t(43433),n=t(79556),i=t(77381),d=t(10518),o=t(59434);let c=l.bL;l.YJ;let u=l.WT,m=a.forwardRef((e,r)=>{let{className:t,children:a,...i}=e;return(0,s.jsxs)(l.l9,{ref:r,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=l.l9.displayName;let f=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.PP,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=l.PP.displayName;let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.wn,{ref:r,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=l.wn.displayName;let h=a.forwardRef((e,r)=>{let{className:t,children:a,position:n="popper",...i}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:r,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,s.jsx)(f,{}),(0,s.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(x,{})]})})});h.displayName=l.UC.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.JU,{ref:r,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=l.JU.displayName;let p=a.forwardRef((e,r)=>{let{className:t,children:a,...n}=e;return(0,s.jsxs)(l.q7,{ref:r,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:a})]})});p.displayName=l.q7.displayName,a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.wv,{ref:r,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=l.wv.displayName},62278:(e,r,t)=>{"use strict";t.d(r,{rc:()=>V,ZD:()=>z,UC:()=>U,VY:()=>J,hJ:()=>F,ZL:()=>Z,bL:()=>S,hE:()=>_,l9:()=>P});var s=t(12115),a=t(46081),l=t(6101),n=t(45821),i=t(85185),d=t(95155);s.forwardRef((e,r)=>{let{children:t,...a}=e,l=s.Children.toArray(t),n=l.find(u);if(n){let e=n.props.children,t=l.map(r=>r!==n?r:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,d.jsx)(o,{...a,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,t):null})}return(0,d.jsx)(o,{...a,ref:r,children:t})}).displayName="Slot";var o=s.forwardRef((e,r)=>{let{children:t,...a}=e;if(s.isValidElement(t)){let e=function(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t),n=function(e,r){let t={...r};for(let s in r){let a=e[s],l=r[s];/^on[A-Z]/.test(s)?a&&l?t[s]=(...e)=>{l(...e),a(...e)}:a&&(t[s]=a):"style"===s?t[s]={...a,...l}:"className"===s&&(t[s]=[a,l].filter(Boolean).join(" "))}return{...e,...t}}(a,t.props);return t.type!==s.Fragment&&(n.ref=r?(0,l.t)(r,e):e),s.cloneElement(t,n)}return s.Children.count(t)>1?s.Children.only(null):null});o.displayName="SlotClone";var c=({children:e})=>(0,d.jsx)(d.Fragment,{children:e});function u(e){return s.isValidElement(e)&&e.type===c}var m="AlertDialog",[f,x]=(0,a.A)(m,[n.Hs]),h=(0,n.Hs)(),p=e=>{let{__scopeAlertDialog:r,...t}=e,s=h(r);return(0,d.jsx)(n.bL,{...s,...t,modal:!0})};p.displayName=m;var j=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=h(t);return(0,d.jsx)(n.l9,{...a,...s,ref:r})});j.displayName="AlertDialogTrigger";var y=e=>{let{__scopeAlertDialog:r,...t}=e,s=h(r);return(0,d.jsx)(n.ZL,{...s,...t})};y.displayName="AlertDialogPortal";var g=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=h(t);return(0,d.jsx)(n.hJ,{...a,...s,ref:r})});g.displayName="AlertDialogOverlay";var N="AlertDialogContent",[v,b]=f(N),w=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,children:a,...o}=e,u=h(t),m=s.useRef(null),f=(0,l.s)(r,m),x=s.useRef(null);return(0,d.jsx)(n.G$,{contentName:N,titleName:A,docsSlug:"alert-dialog",children:(0,d.jsx)(v,{scope:t,cancelRef:x,children:(0,d.jsxs)(n.UC,{role:"alertdialog",...u,...o,ref:f,onOpenAutoFocus:(0,i.m)(o.onOpenAutoFocus,e=>{var r;e.preventDefault(),null==(r=x.current)||r.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,d.jsx)(c,{children:a}),(0,d.jsx)(O,{contentRef:m})]})})})});w.displayName=N;var A="AlertDialogTitle",R=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=h(t);return(0,d.jsx)(n.hE,{...a,...s,ref:r})});R.displayName=A;var C="AlertDialogDescription",E=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=h(t);return(0,d.jsx)(n.VY,{...a,...s,ref:r})});E.displayName=C;var D=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,a=h(t);return(0,d.jsx)(n.bm,{...a,...s,ref:r})});D.displayName="AlertDialogAction";var L="AlertDialogCancel",k=s.forwardRef((e,r)=>{let{__scopeAlertDialog:t,...s}=e,{cancelRef:a}=b(L,t),i=h(t),o=(0,l.s)(r,a);return(0,d.jsx)(n.bm,{...i,...s,ref:o})});k.displayName=L;var O=e=>{let{contentRef:r}=e,t="`".concat(N,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(N,"` by passing a `").concat(C,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(N,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return s.useEffect(()=>{var e;document.getElementById(null==(e=r.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(t)},[t,r]),null},S=p,P=j,Z=y,F=g,U=w,V=D,z=k,_=R,J=E},90010:(e,r,t)=>{"use strict";t.d(r,{$v:()=>h,EO:()=>u,Lt:()=>d,Rx:()=>p,Zr:()=>j,ck:()=>f,r7:()=>x,wd:()=>m});var s=t(95155),a=t(12115),l=t(62278),n=t(59434),i=t(30285);let d=l.bL;l.l9;let o=l.ZL,c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:r})});c.displayName=l.hJ.displayName;let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(c,{}),(0,s.jsx)(l.UC,{ref:r,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a})]})});u.displayName=l.UC.displayName;let m=e=>{let{className:r,...t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",r),...t})};m.displayName="AlertDialogHeader";let f=e=>{let{className:r,...t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t})};f.displayName="AlertDialogFooter";let x=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.hE,{ref:r,className:(0,n.cn)("text-lg font-semibold",t),...a})});x.displayName=l.hE.displayName;let h=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.VY,{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});h.displayName=l.VY.displayName;let p=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.rc,{ref:r,className:(0,n.cn)((0,i.r)(),t),...a})});p.displayName=l.rc.displayName;let j=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(l.ZD,{ref:r,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...a})});j.displayName=l.ZD.displayName},91598:(e,r,t)=>{Promise.resolve().then(t.bind(t,39048))}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,7416,1648,1790,332,5152,1224,2703,3421,3547,7505,8441,1684,7358],()=>r(91598)),_N_E=e.O()}]);