(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8577],{986:(e,a,t)=>{Promise.resolve().then(t.bind(t,58482))},3561:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(40157).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},34301:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},40968:(e,a,t)=>{"use strict";t.d(a,{b:()=>i});var r=t(12115),s=t(63540),n=t(95155),l=r.forwardRef((e,a)=>(0,n.jsx)(s.sG.label,{...e,ref:a,onMouseDown:a=>{var t;a.target.closest("button, input, select, textarea")||(null==(t=e.onMouseDown)||t.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var i=l},58482:(e,a,t)=>{"use strict";t.d(a,{default:()=>v});var r=t(95155),s=t(12115),n=t(30285),l=t(66695),i=t(54165),d=t(44838),o=t(62523),c=t(85057),u=t(85127),m=t(34301),p=t(3561),f=t(87481),x=t(90010),h=t(68856),g=t(90767),j=t(35317);let y={name:"",price:0,addonCategoryId:""};function v(){let e=(0,g.jt)(),a=(0,g.$e)(()=>e?(0,j.rJ)(e,"addons"):null,[e]),t=(0,g.$e)(()=>e?(0,j.rJ)(e,"addon_categories"):null,[e]),{data:v,isLoading:N}=(0,g.Ge)(a),{data:b,isLoading:w}=(0,g.Ge)(t),[A,C]=(0,s.useState)(!1),[R,D]=(0,s.useState)(!1),[E,k]=(0,s.useState)(null),[I,O]=(0,s.useState)(y),{toast:L}=(0,f.dj)();(0,s.useEffect)(()=>{if(A)if(E)O({name:E.name,price:E.price,addonCategoryId:E.addonCategoryId});else{var e;O({...y,addonCategoryId:(null==b||null==(e=b[0])?void 0:e.id)||""})}},[A,E,b]);let S=e=>{let{name:a,value:t}=e.target;O(e=>({...e,[a]:"price"===a?""===t?"":parseFloat(t):t}))},F=e=>{k(e),C(!0)},Z=e=>{k(e),D(!0)},J=async()=>{E&&e&&(await (0,j.kd)((0,j.H9)(e,"addons",E.id)),L({title:"Add-on Deleted",description:"".concat(E.name," has been removed.")}),D(!1),k(null))},P=async a=>{if(a.preventDefault(),!e)return;let t={...I,price:Number(I.price)||0};if(!t.name||t.price<0||!t.addonCategoryId)return void L({variant:"destructive",title:"Missing Information",description:"Please fill out a valid name, price, and category."});E?(await (0,j.BN)((0,j.H9)(e,"addons",E.id),t,{merge:!0}),L({title:"Add-on Updated",description:"".concat(t.name," has been updated.")})):(await (0,j.gS)((0,j.rJ)(e,"addons"),t),L({title:"Add-on Added",description:"".concat(t.name," has been added.")})),C(!1),k(null)};if(N||w)return(0,r.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(h.E,{className:"h-8 w-48"}),(0,r.jsx)(h.E,{className:"h-10 w-32"})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(h.E,{className:"h-12 w-full"}),(0,r.jsx)(h.E,{className:"h-16 w-full"}),(0,r.jsx)(h.E,{className:"h-16 w-full"})]})})]});let $=e=>{var a;return(null==b||null==(a=b.find(a=>a.id===e))?void 0:a.name)||"N/A"};return(0,r.jsxs)(l.Zp,{className:"shadow-lg",children:[(0,r.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(l.ZB,{className:"font-headline text-2xl",children:"Add-ons"}),(0,r.jsxs)(n.$,{size:"sm",onClick:()=>{k(null),C(!0)},children:[(0,r.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Add New Add-on"]})]}),(0,r.jsx)(l.Wu,{children:(0,r.jsxs)(u.XI,{children:[(0,r.jsx)(u.A0,{children:(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nd,{children:"Name"}),(0,r.jsx)(u.nd,{children:"Category"}),(0,r.jsx)(u.nd,{className:"text-right",children:"Price"}),(0,r.jsx)(u.nd,{children:(0,r.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,r.jsx)(u.BF,{children:null==v?void 0:v.map(e=>(0,r.jsxs)(u.Hj,{children:[(0,r.jsx)(u.nA,{className:"font-medium",children:e.name}),(0,r.jsx)(u.nA,{children:$(e.addonCategoryId)}),(0,r.jsxs)(u.nA,{className:"text-right",children:["LKR ",e.price.toFixed(2)]}),(0,r.jsx)(u.nA,{className:"text-right",children:(0,r.jsxs)(d.rI,{children:[(0,r.jsx)(d.ty,{asChild:!0,children:(0,r.jsxs)(n.$,{"aria-haspopup":"true",size:"icon",variant:"ghost",children:[(0,r.jsx)(p.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,r.jsxs)(d.SQ,{align:"end",children:[(0,r.jsx)(d.lp,{children:"Actions"}),(0,r.jsx)(d._2,{onClick:()=>F(e),children:"Edit"}),(0,r.jsx)(d._2,{className:"text-destructive",onClick:()=>Z(e),children:"Delete"})]})]})})]},e.id))})]})}),(0,r.jsx)(i.lG,{open:A,onOpenChange:C,children:(0,r.jsx)(i.Cf,{className:"sm:max-w-[425px]",children:(0,r.jsxs)("form",{onSubmit:P,children:[(0,r.jsxs)(i.c7,{children:[(0,r.jsx)(i.L3,{className:"font-headline",children:E?"Edit Add-on":"Add New Add-on"}),(0,r.jsx)(i.rr,{children:E?"Make changes to the add-on.":"Add a new customization add-on."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"name",children:"Name"}),(0,r.jsx)(o.p,{id:"name",name:"name",value:I.name,onChange:S,required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"price",children:"Price (LKR)"}),(0,r.jsx)(o.p,{id:"price",name:"price",type:"number",step:"0.01",value:I.price,onChange:S,required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(c.J,{htmlFor:"addonCategoryId",children:"Category"}),(0,r.jsxs)("select",{id:"addonCategoryId",name:"addonCategoryId",value:I.addonCategoryId||"",onChange:S,required:!0,className:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),null==b?void 0:b.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,r.jsxs)(i.Es,{children:[(0,r.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>C(!1),children:"Cancel"}),(0,r.jsx)(n.$,{type:"submit",children:"Save changes"})]})]})})}),(0,r.jsx)(x.Lt,{open:R,onOpenChange:D,children:(0,r.jsxs)(x.EO,{children:[(0,r.jsxs)(x.wd,{children:[(0,r.jsx)(x.r7,{children:"Are you absolutely sure?"}),(0,r.jsx)(x.$v,{children:"This action cannot be undone. This will permanently delete the add-on."})]}),(0,r.jsxs)(x.ck,{children:[(0,r.jsx)(x.Zr,{children:"Cancel"}),(0,r.jsx)(x.Rx,{onClick:J,className:"bg-destructive hover:bg-destructive/90",children:"Delete"})]})]})})]})}},62278:(e,a,t)=>{"use strict";t.d(a,{rc:()=>P,ZD:()=>$,UC:()=>J,VY:()=>z,hJ:()=>Z,ZL:()=>F,bL:()=>L,hE:()=>_,l9:()=>S});var r=t(12115),s=t(46081),n=t(6101),l=t(45821),i=t(85185),d=t(95155);r.forwardRef((e,a)=>{let{children:t,...s}=e,n=r.Children.toArray(t),l=n.find(u);if(l){let e=l.props.children,t=n.map(a=>a!==l?a:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,d.jsx)(o,{...s,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,t):null})}return(0,d.jsx)(o,{...s,ref:a,children:t})}).displayName="Slot";var o=r.forwardRef((e,a)=>{let{children:t,...s}=e;if(r.isValidElement(t)){let e=function(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=a&&"isReactWarning"in a&&a.isReactWarning;return t?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref}(t),l=function(e,a){let t={...a};for(let r in a){let s=e[r],n=a[r];/^on[A-Z]/.test(r)?s&&n?t[r]=(...e)=>{n(...e),s(...e)}:s&&(t[r]=s):"style"===r?t[r]={...s,...n}:"className"===r&&(t[r]=[s,n].filter(Boolean).join(" "))}return{...e,...t}}(s,t.props);return t.type!==r.Fragment&&(l.ref=a?(0,n.t)(a,e):e),r.cloneElement(t,l)}return r.Children.count(t)>1?r.Children.only(null):null});o.displayName="SlotClone";var c=({children:e})=>(0,d.jsx)(d.Fragment,{children:e});function u(e){return r.isValidElement(e)&&e.type===c}var m="AlertDialog",[p,f]=(0,s.A)(m,[l.Hs]),x=(0,l.Hs)(),h=e=>{let{__scopeAlertDialog:a,...t}=e,r=x(a);return(0,d.jsx)(l.bL,{...r,...t,modal:!0})};h.displayName=m;var g=r.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...r}=e,s=x(t);return(0,d.jsx)(l.l9,{...s,...r,ref:a})});g.displayName="AlertDialogTrigger";var j=e=>{let{__scopeAlertDialog:a,...t}=e,r=x(a);return(0,d.jsx)(l.ZL,{...r,...t})};j.displayName="AlertDialogPortal";var y=r.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...r}=e,s=x(t);return(0,d.jsx)(l.hJ,{...s,...r,ref:a})});y.displayName="AlertDialogOverlay";var v="AlertDialogContent",[N,b]=p(v),w=r.forwardRef((e,a)=>{let{__scopeAlertDialog:t,children:s,...o}=e,u=x(t),m=r.useRef(null),p=(0,n.s)(a,m),f=r.useRef(null);return(0,d.jsx)(l.G$,{contentName:v,titleName:A,docsSlug:"alert-dialog",children:(0,d.jsx)(N,{scope:t,cancelRef:f,children:(0,d.jsxs)(l.UC,{role:"alertdialog",...u,...o,ref:p,onOpenAutoFocus:(0,i.m)(o.onOpenAutoFocus,e=>{var a;e.preventDefault(),null==(a=f.current)||a.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,d.jsx)(c,{children:s}),(0,d.jsx)(O,{contentRef:m})]})})})});w.displayName=v;var A="AlertDialogTitle",C=r.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...r}=e,s=x(t);return(0,d.jsx)(l.hE,{...s,...r,ref:a})});C.displayName=A;var R="AlertDialogDescription",D=r.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...r}=e,s=x(t);return(0,d.jsx)(l.VY,{...s,...r,ref:a})});D.displayName=R;var E=r.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...r}=e,s=x(t);return(0,d.jsx)(l.bm,{...s,...r,ref:a})});E.displayName="AlertDialogAction";var k="AlertDialogCancel",I=r.forwardRef((e,a)=>{let{__scopeAlertDialog:t,...r}=e,{cancelRef:s}=b(k,t),i=x(t),o=(0,n.s)(a,s);return(0,d.jsx)(l.bm,{...i,...r,ref:o})});I.displayName=k;var O=e=>{let{contentRef:a}=e,t="`".concat(v,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(v,"` by passing a `").concat(R,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(v,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return r.useEffect(()=>{var e;document.getElementById(null==(e=a.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},L=h,S=g,F=j,Z=y,J=w,P=E,$=I,_=C,z=D},62523:(e,a,t)=>{"use strict";t.d(a,{p:()=>l});var r=t(95155),s=t(12115),n=t(59434);let l=s.forwardRef((e,a)=>{let{className:t,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});l.displayName="Input"},90010:(e,a,t)=>{"use strict";t.d(a,{$v:()=>x,EO:()=>u,Lt:()=>d,Rx:()=>h,Zr:()=>g,ck:()=>p,r7:()=>f,wd:()=>m});var r=t(95155),s=t(12115),n=t(62278),l=t(59434),i=t(30285);let d=n.bL;n.l9;let o=n.ZL,c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});c.displayName=n.hJ.displayName;let u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsxs)(o,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(n.UC,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});u.displayName=n.UC.displayName;let m=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};m.displayName="AlertDialogHeader";let p=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};p.displayName="AlertDialogFooter";let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.hE,{ref:a,className:(0,l.cn)("text-lg font-semibold",t),...s})});f.displayName=n.hE.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.VY,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});x.displayName=n.VY.displayName;let h=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.rc,{ref:a,className:(0,l.cn)((0,i.r)(),t),...s})});h.displayName=n.rc.displayName;let g=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(n.ZD,{ref:a,className:(0,l.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});g.displayName=n.ZD.displayName}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,7416,1648,1790,332,5152,1224,3421,3547,7505,8441,1684,7358],()=>a(986)),_N_E=e.O()}]);